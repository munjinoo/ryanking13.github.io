document.addEventListener("DOMContentLoaded",function(){let n=[];const s=document.querySelector(".input-wrapper"),e=document.querySelector(".content-wrapper"),t=s.querySelector("input"),o=e.querySelector(".search-results");var r=o.querySelector("template").innerHTML,c;function i(t,n){t.classList.contains("active")?(t.classList.add("visible"),e.querySelector(".content").style.display="block",e.querySelector(".comments").style.display="block",setTimeout(function(){t.classList.remove("visible")},300),t.classList.remove("active")):(t.classList.add("active"),e.querySelector(".content").style.display="none",e.querySelector(".comments").style.display="none",n.focus())}document.querySelectorAll(".toggle-search").forEach(function(e){e.addEventListener("click",function(){i(s,t)})}),window.addEventListener("keydown",function(e){e.keyCode==27&&s.classList.contains("active")&&(e.preventDefault(),t.value="",o.innerHTML="",i(s,t))}),c={includeMatches:!0,ignoreLocation:!0,tokenize:!0,threshold:.1,minMatchCharLength:1,keys:[{name:"title",weight:1},{name:"category",weight:.2}]};function a(e,t){if(t){let n=new RegExp(t,"i");e=e.replace(n,function(e){return"<mark>"+e+"</mark>"})}return e}function l(e){return e.toLowerCase().replace(" ","-")}axios.get("/search-data").then(function(s){const e=s.data;var i=new Fuse(e,c);t.removeAttribute("disabled"),t.addEventListener("keyup",function(s){let t=s.target.value;t&&t.length>=2?n=i.search(t):n=[],n.length>0?o.innerHTML=n.map(function(s){let n=e.find(function(e){return e.id==parseInt(s.item.id)});return r.replace("{title}",a(n.title,t)).replaceAll("{url}",n.url).replace("{date}",n.date).replace("{category}",a(n.category,t)).replace("{categoryUrl}",window.location.origin+"/categories/"+l(n.category)).replace("{summary}",n.summary)}).join(""):o.innerHTML="<p class='no-result'>No results found</p>"})}).catch(function(e){console.error(e)})})